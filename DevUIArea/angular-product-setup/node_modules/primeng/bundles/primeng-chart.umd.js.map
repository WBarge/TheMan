{"version":3,"file":"primeng-chart.umd.js","sources":["ng:/primeng/chart/chart.ts"],"names":["EventEmitter","ElementRef","Component","ChangeDetectionStrategy","ViewEncapsulation","Input","Output","NgModule","CommonModule"],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,EventEmitter,ChangeDetectionStrategy, ViewEncapsulation} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport * as Chart from 'chart.js';\n\n@Component({\n    selector: 'p-chart',\n    template: `\n        <div style=\"position:relative\" [style.width]=\"responsive && !width ? null : width\" [style.height]=\"responsive && !height ? null : height\">\n            <canvas [attr.width]=\"responsive && !width ? null : width\" [attr.height]=\"responsive && !height ? null : height\" (click)=\"onCanvasClick($event)\"></canvas>\n        </div>\n    `,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None\n})\nexport class UIChart implements AfterViewInit, OnDestroy {\n\n    @Input() type: string;\n\n    @Input() plugins: any[] = [];\n    \n    @Input() width: string;\n    \n    @Input() height: string;\n\n    @Input() responsive: boolean = true;\n    \n    @Output() onDataSelect: EventEmitter<any> = new EventEmitter();\n\n    initialized: boolean;\n    \n    _data: any;\n\n    _options: any = {};\n\n    chart: any;\n\n    constructor(public el: ElementRef) {}\n    \n    @Input() get data(): any {\n        return this._data;\n    }\n\n    set data(val:any) {\n        this._data = val;\n        this.reinit();\n    }\n\n    @Input() get options(): any {\n        return this._options;\n    }\n\n    set options(val:any) {\n        this._options = val;\n        this.reinit();\n    }\n\n    ngAfterViewInit() {\n        this.initChart();\n        this.initialized = true;\n    }\n\n    onCanvasClick(event) {\n        if (this.chart) {\n            let element = this.chart.getElementAtEvent(event);\n            let dataset = this.chart.getDatasetAtEvent(event);\n            if (element && element[0] && dataset) {\n                this.onDataSelect.emit({originalEvent: event, element: element[0], dataset: dataset});\n            }\n        }\n    }\n\n    initChart() {\n        let opts = this.options||{};\n        opts.responsive = this.responsive;\n\n        // allows chart to resize in responsive mode\n        if (opts.responsive&&(this.height||this.width)) {\n            opts.maintainAspectRatio = false;\n        }\n\n        this.chart = new Chart(this.el.nativeElement.children[0].children[0], {\n            type: this.type,\n            data: this.data,\n            options: this.options,\n            plugins: this.plugins\n        });\n    }\n    \n    getCanvas() {\n        return this.el.nativeElement.children[0].children[0];\n    }\n    \n    getBase64Image() {\n        return this.chart.toBase64Image();\n    }\n    \n    generateLegend() {\n        if (this.chart) {\n            return this.chart.generateLegend();\n        }\n    }\n    \n    refresh() {\n        if (this.chart) {\n            this.chart.update();\n        }\n    }\n    \n    reinit() {\n        if (this.chart) {\n            this.chart.destroy();\n            this.initChart();\n        }\n    }\n    \n    ngOnDestroy() {\n        if (this.chart) {\n            this.chart.destroy();\n            this.initialized = false;\n            this.chart = null;\n        }\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [UIChart],\n    declarations: [UIChart]\n})\nexport class ChartModule { }\n"]}